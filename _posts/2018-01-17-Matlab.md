---
layout: post
title: Matlab中常用的一些命令及知识点。
---

标签： Matlab


[TOC]


### 一些常用的命令
#### 1 、clf - 清除当前图形窗口

#### 2、clearvars—清除变量，后接变量名的话，清除指定变量

#### 3、whos——列出工作区中变量及大小和类型

### 一些常用的函数
1、size——数组大小
```
1）sz = size(A)  ——  返回一个行矢量，其元素包含 A 的相应维度的长度。例如，如果 A 是一个 3×4 矩阵，则 size(A) 返回矢量 [3 4]。sz 的长度为 ndims(A)。如果 A 是表或时间表，则 size(A) 返回由表中的行数和变量数组成的二元素行矢量。

2）szdim = size(A,dim) 返回维度 dim 的长度。

3）当 A 是矩阵时，[m,n] = size(A) 返回行数和列数。

4）[sz1,...,szN] = size(A) 分别返回 A 的每个维度的长度。
```

### MotionPlanning 中碰到的一些比较专业的函数

1、pdist——(各种距离的生成）
[Matlab中 pdist 函数详解(各种距离的生成)](http://blog.sciencenet.cn/blog-531885-589056.html)

### 快捷键
ctrl+R  注释选中块
ctrl+T  取消注释

### 关于矩阵的初始化操作
##### 1、zeros——创建全零数组

| 说明 |
|-------|
| X = zeros 返回标量 0。|
|X = zeros(n) 返回一个 n×n 的全零矩阵。|
|X = zeros(sz1,...,szN) 返回由零组成的 sz1×...×szN 数组，其中 sz1,...,szN 指示每个维度的大小。例如，zeros(2,3) 将返回一个 2×3 矩阵。|
|X = zeros(sz) 返回一个由零组成的数组，其中大小矢量 sz 定义 size(X)。例如，zeros([2 3]) 将返回一个 2×3 矩阵。|

##### 2、true——逻辑值 1（真）


| 说明 |
|-------|
|true 是逻辑值 1 的速记形式。|
|T = true(n) 是逻辑值为 1 的 n×n 矩阵。|
|T = true(sz) 是一个由逻辑值组成的数组，其中大小矢量 sz 定义 size(T)。例如，true([2 3]) 返回由逻辑值“1”组成的 2×3 数组。。|
|T = true(sz1,...,szN) 是由逻辑值组成的 sz1×...×szN 数组，其中 sz1,...,szN 表示每个维度的大小。例如，true(2,3) 返回由逻辑值“1”组成的 2×3 数组。|

##### 3、ones——创建全为1的数组
用法同上

#### 4.eye——单位矩阵
```
I = eye
I = eye(n)
I = eye(n,m)
I = eye(sz)
```
I = eye 返回标量 1。

I = eye(n) 返回一个主对角线元素为 1 且其他位置元素为 0 的 n×n 单位矩阵。

I = eye(n,m) 返回一个主对角线元素为 1 且其他位置元素为 0 的 n×m 矩阵。

I = eye(sz) 返回一个主对角线元素为 1 且其他位置元素为 0 的数组。大小矢量 sz 定义 size(I)。例如，eye([2,3]) 返回一个主对角线元素为 1 且其他位置元素为 0 的 2×3 数组。

#### 5.sparse—创建稀疏矩阵

```
S = sparse(A)
S = sparse(m,n)
S = sparse(i,j,v)
S = sparse(i,j,v,m,n)
S = sparse(i,j,v,m,n,nz)
```
S = sparse(A) 通过挤出任何零元素将满矩阵转换为稀疏格式。如果矩阵包含许多零，将矩阵转换为稀疏存储空间可以节省内存。

S = sparse(m,n) 生成 m×n 全零稀疏矩阵。

S = sparse(i,j,v) 根据 i、j 和 v 三元数生成稀疏矩阵 S，以便 S(i(k),j(k)) = v(k)。max(i)×max(j) 输出矩阵为 length(v) 非零元素分配了空间。sparse 将 v 中下标重复（在i 和 j 中）的元素加到一起。
如果输入 i、j 和 v 为矢量或矩阵，则它们必须具有相同数量的元素。参数 v 和/或 i 或 j 其中一个参数可以使标量。

S = sparse(i,j,v,m,n) 将 S 的大小指定为 m×n。
```matlab
i = [900 1000];
j = [900 1000];
v = [10 100];
S = sparse(i,j,v,1500,1500)

%当指定的大小大于 max(i)×max(j) 时，sparse 函数会使用额外的零值行和列填充输出。

size(S)
ans = 

        1500        1500
        
S=sparse(a,b,v)

S =

 (900,900)     10
(1000,1000)   100

size(S)

ans =

        1000        1000
```

S = sparse(i,j,v,m,n,nz) 为 nz 非零元素分配空间。可以使用此语法为构造后要填充的非零值分配额外空间。

创建一个由 10 个非零值构成的稀疏矩阵，但实际上为此矩阵分配可以存储 100 个非零值的空间。
```matlab
>> S = sparse(1:10,1:10,5,20,20,100)

S =

   (1,1)        5
   (2,2)        5
   (3,3)        5
   (4,4)        5
   (5,5)        5
   (6,6)        5
   (7,7)        5
   (8,8)        5
   (9,9)        5
  (10,10)       5

>> N = nnz(S)

N =

    10

>> N_alloc = nzmax(S)

N_alloc =

   100
```

#### 6.full—将稀疏矩阵转换为满矩阵
```
A = full(S)
```
A = full(S) 将稀疏矩阵 S 转换为满存储结构，这样 issparse(A) 返回逻辑值 0 (false)。如果 S 为满矩阵，则 A 等效于 S。

### 关于矩阵的下标操作与赋值
1、matlab中的下标从1开始，matlab中矩阵初始化用[],下标操作用().
例如：
```matlab
>> a=[1 2 3 4;5 6 7 8]

a =

     1     2     3     4
     5     6     7     8
     
>> a(2,1)

ans =

     5

```

2、matlab中是按列存储的，故用一个下标索引二维数组时，a(2)应该等于a(2,1).
```matlab
>> a(2)

ans =

     5
```
3、matlab中取某一行或者某一列a(1,:)取第一行，a（：，2）取第二列。

```matlab
>> a(1,:)

ans =

     1     2     3     4

>> a(:,2)

ans =

     2
     6
```

4、matlab中进行下标索引时，如果该下标不存在，则会将该值赋给该下标所指向的元素，全面空缺的全部补0

```matlab
>> a=[]

a =

     []

>> a(4)=1

a =

     0     0     0     1
```

5、matlab中end表示最后一个元素的下标
```matlab
>> a(end)

ans =

     2

>> 
```
故，往数组最后添加元素可以这样操作

```matlab
>> a=[1]

a =

     1

>> a(end+1)=2

a =

     1     2
```

### matlab中矩阵的数组索引与逻辑索引
#### 1、数组索引
一个矩阵或者数组作为另一个矩阵下标取选取相应的矩阵元素，称为数组索引。
数组索引可以分为：单下标索引和多下标索引。

单下标索引的例子如下：
```matlab
>> x=10:10:50

x =

    10    20    30    40    50

>> y=[5,2,3,4,1]

y =

     5     2     3     4     1

>> x(y)

ans =

    50    20    30    40    10
    
>> a=[1,3,4,5]

a =

     1     3     4     5

>> a(1)=7

a =

     7     3     4     5

>> a([3,1])

ans =

     4     7

>> b=[1,2,3;4,5,6;7,8,9]

b =

     1     2     3
     4     5     6
     7     8     9

>> b(:)

ans =

     1
     4
     7
     2
     5
     8
     3
     6
     9
```

**b(:)这种索引方式是将矩阵表示成列向量形式**
**在matlab中，单个数值可以理解为一个元素的1x1的矩阵**，所以所谓的线性索引也不过是数组索引中的一种特例。
从上面的例子可以看出，单下标索引中的冒号索引可以实现多维矩阵的列向量化，这和多下标索引中的冒号索引又不尽相同。

多下标索引的例子：

```matlb

>> a = [1:3;4:6;7:9]

a =

     1     2     3
     4     5     6
     7     8     9

>> a(2,2)=0

a =

     1     2     3
     4     0     6
     7     8     9

>> a([1,3],[2,3])

ans =

     2     3
     8     9

>> a(:,1)

ans =

     1
     4
     7

>> a(:,[2,3])

ans =

     2     3
     0     6
     8     9

>> a(1,:)

ans =

     1     2     3

>> a([1,3],:)

ans =

     1     2     3
     7     8     9
```

**注意在单下标索引和多下标索引中冒号：的区别。**

#### 2、逻辑索引
逻辑索引是使用逻辑值0和1构成的矩阵从其他矩阵中提取所需的元素，这时的逻辑矩阵必须和被索引的矩阵大小一样。

```matlab
>> x=10:10:50

x =

    10    20    30    40    50

>> y=logical([1 0 0 1 0])

y =

  1×5 logical 数组

   1   0   0   1   0

>> x(y)

ans =

    10    40
```

#### 3、两者之间的区别和联系
逻辑索引矩阵必须和原数组的维数相同，而数组 索引没有这样的要求，但是数组索引中的单下标索引又具有和逻辑索引的相同之处，通过以下例子说明：

```matlab
>> a=[1:3;4:6;7:9]

a =

     1     2     3
     4     5     6
     7     8     9

>> b=a>5

b =

  3×3 logical 数组

   0   0   0
   0   0   1
   1   1   1

>> a(b)

ans =

     7
     8
     6
     9
     
     
>> a=1:5

a =

     1     2     3     4     5

>> a(a<3)

ans =

     1     2
     
>> b=[1:3;4:6;7:9]

b =

     1     2     3
     4     5     6
     7     8     9

>> b(4)

ans =

     2

>> b([2,5])

ans =

     4     5
```

从上面的例子可以看出，当对多维矩阵进行单下标索引时，会首先将矩阵进行列向量化，然后再按照顺序选出其对应的元素。而逻辑索引处理多维矩阵时，也是先进行列向量化后再按照顺序选出其对应的元素。

#### 另外一种数组索引与逻辑索引的混合表示法？
如下：

```matlab

>> q=rand(2,5)*5

q =

    3.5302    1.3846    0.4857    3.4741    4.7511
    0.1592    0.2309    4.1173    1.5855    0.1722

>> p=(q(1,:)<3)

p =

  1×5 logical 数组

   0   1   1   0   0

>> q(:,p)

ans =

    1.3846    0.4857
    0.2309    4.1173
```

**在上述的例子中，q是一个2x5的数组，p是一个1x5的逻辑数组，q(：，p)返回p中为1的列。**





### 关于矩阵的一些常用数学运算
1、矩阵的转置 **'**
```matlab
a =

     1     2     3     4
     5     6     7     8

>> a'

ans =

     1     5
     2     6
     3     7
     4     8
```

### 关于矩阵的逻辑运算函数
#### 1、isempty——确定数组是否为空
```
TF = isempty(A)
如果 A 为空数组，TF = isempty(A) 返回逻辑值 1 (true)；
否则返回逻辑值 0 (false)。空数组至少具有一个大小为零的维度，例如，0×0 或 0×5。
```

#### 2、all——确定所有的数组是否为非0（或者true）
```
B = all(A)
B = all(A,dim)
```


B = all(A) 沿着大小不等于 1 的数组 A 的第一维测试所有元素为非零还是逻辑值 1 (true)。实际上，all 是逻辑 AND 运算符的原生扩展。

+ 如果 A 为矢量，当所有元素为非零时，all(A) 返回逻辑 1 (true)，当一个或多个元素为零时，返回逻辑 0 (false)。
+ 如果 A 为非空非矢量矩阵，all(A) 将 A 的**各列**视为矢量，返回包含逻辑 1 和 0 的行矢量。
+ 如果 A 为 0×0 空矩阵，all(A) 返回逻辑 1 (true)。
+ 如果 A 为多维数组，则 all(A) 沿第一个非单一维度运算并返回逻辑值数组。此维的大小将变为 1，而所有其他维的大小保持不变。


B = all(A,dim) 沿着 dim 维测试元素。dim 输入是一个正整数标量。
沿其运算的维度，指定为正整数标量。如果未指定值，则默认值是大小不等于 1 的第一个数组维度。

以一个二维输入数组 A 为例：

+ all(A,1) 对 A 中列的连续元素进行处理并返回逻辑值行矢量。
+ all(A,2) 对 A 中行的连续元素进行处理并返回逻辑值列矢量。

**将逻辑矢量降为单一条件**
例：

```matlab
>> A = [0.53 0.67 0.01 0.38 0.07 0.42 0.69];
B = (A < 0.5)

B =

  1×7 logical 数组

   0   0   1   1   1   1   0
   
 >>  all(A)

ans =

  logical

   1
```
其中输出的B是一个逻辑矢量，all函数将逻辑提哦案件的此类矢量降低为单一条件，在这种条件下，B=all（A)得出逻辑0

### matlab中常用的函数

#### 1.min函数——数组中的最小元素
```
M = min(A)
M = min(A,[],dim)
[M,I] = min(___)
C = min(A,B)
___ = min(___,nanflag)
```

M = min(A) 返回 A 的最小元素。

+ 如果 A 为矢量，则 min(A) 返回 A 的最小元素。
- 如果 A 为矩阵，则 min(A) 是包含每一列的最小值的行矢量。
- 如果 A 是多维数组，则 min(A) 沿大小不等于 1 的第一个数组维度计算，并将这些元素视为矢量。此维度的大小将变为 1，而所有其他维度的大小保持不变。如果 A 是第一个维度为 0 的空数组，则 min(A) 返回与 A 大小相同的空数组。

M = min(A,[],dim) 沿着维度 dim 返回最小元素。例如，如果 A 为矩阵，则 min(A,[],2) 是包含每一行的最小值的列矢量。

[M,I] = min(___) 使用先前语法中的任何输入参数，查找 A 的最小值的索引，并在输出矢量 I 中返回这些索引。如果最大值出现多次，则 min 返回对应于第一次出现位置的索引。

C = min(A,B) 返回从 A 或 B 中提取的最小元素的数组。
```matlab
>> A = [1 7 3; 6 2 9]

A =

     1     7     3
     6     2     9

>> B=[5]

B =

     5

>> C=min(A,B)

C =

     1     5     3
     5     2     5
```

#### 2.find函数——查找非零元素的索引和值

```
k = find(X)
k = find(X,n)
k = find(X,n,direction)
[row,col] = find(___)
[row,col,v] = find(___)
```

k = find(X) 返回一个包含数组 X 中每个非零元素的线性索引的矢量。

+ 如果 X 为矢量，则 find 返回方向与 X 相同的矢量。
+ 如果 X 为多维数组，则 find 返回由结果的线性索引组成的列矢量。
+ 如果 X 包含非零元素或为空，则 find 返回一个空数组。

k = find(X,n) 返回与 X 中的非零元素对应的前 n 个索引。

k = find(X,n,direction)（其中 direction 为 'last'）查找与 X 中的非零元素对应的最后 n 个索引。direction 的默认值为 'first'，即查找与非零元素对应的前 n 个索引。

[row,col] = find(___) 使用前面语法中的任何输入参数返回数组 X 中每个非零元素的行和列下标。

[row,col,v] = find(___) 还返回包含 X 的非零元素的矢量 v。

#### 3.sum函数——数组元素总和
```
S = sum(A)
S = sum(A,dim)
S = sum(___,outtype)
S = sum(___,nanflag)
```

S = sum(A) 返回 A 沿大小不等于 1 的第一个数组维度的元素之和：

- 如果 A 是矢量，则 sum(A) 返回元素之和。
- 如果 A 是矩阵，则 sum(A) 将返回包含每列总和的行矢量。
- 如果 A 是多维数组，则 sum(A) 沿大小不等于 1 的第一个数组维度计算，并将这些元素视为矢量。此维度会变为 1，而所有其他维度的大小保持不变。

S = sum(A,dim) 沿维度 dim 返回总和。例如，如果 A 为矩阵，则 sum(A,2) 是包含每一行总和的列矢量。

S = sum(___,outtype) 使用上述语法中的任何输入参数返回指定数据类型的总和。outtype 可以是 'default'、'double' 或 'native'。

S = sum(___,nanflag) 指定在上述任意语法的计算中包括还是忽略 NaN 值。sum(A,'includenan') 会在计算中包括所有 NaN 值，而 sum(A,'omitnan') 则忽略这些值。

#### 4.sort函数——对数组元素排序

```
B = sort(A)
B = sort(A,dim)
B = sort(___,direction)
B = sort(___,Name,Value)
[B,I] = sort(___)
```

B = sort(A) 按升序对 A 的元素进行排序。

- 如果 A 是矢量，则 sort(A) 对矢量元素进行排序。
- 如果 A 是矩阵，则 sort(A) 会将 A 的列视为矢量并对每列进行排序。
- 如果 A 是多维数组，则 sort(A) 会沿大小不等于 1 的第一个数组维度计算，并将这些元素视为矢量。

B = sort(A,dim) 返回 A 沿维度 dim 的排序元素。例如，如果 A 是一个矩阵，则 sort(A,2) 对每行中的元素进行排序。

B = sort(___,direction) 使用上述任何语法返回按 direction 指定的顺序显示的 A 的有序元素。'ascend' 表示升序（默认值），'descend' 表示降序。

B = sort(___,Name,Value) 指定用于排序的其他参数。例如，sort(A,'ComparisonMethod','abs') 按模对 A 的元素进行排序。

[B,I] = sort(___) 还会为上述任意语法返回一个索引矢量的集合。I 的大小与 A 的大小相同，它描述了 A 的元素沿已排序的维度在 B 中的排列情况。例如，如果 A 是一个矢量，则 B = A(I)。


#### 5.mean函数——数组的平均值
```
M = mean(A)
M = mean(A,dim)
M = mean(___,outtype)
M = mean(___,nanflag)
```

### matlab中的控制流
#### for循环和while循环

![循环]({{site.baseurl}}/images/matlab_for.png)



### 元胞数组
元胞数组是MATLAB 的一种特殊数据类型，可以将元胞数组看作一种无所不包的通用矩阵，或者叫作广义矩阵。组成元胞数组的元素可以是任何一种数据类型的常数或者常量，每一个元素也可以具有不同的尺寸和内存占用空间，每一个元素的内容也可以完全不同，所以元胞数组的元素叫作元胞（cell）。
#### 1.创建元胞数组
例：
```matlab
>>  a={'matlab',20;ones(2,3),1:10}

a =

  2×2 cell 数组

    {'matlab'  }    {[       20]}
    {2×3 double}    {1×10 double}
```

**元胞数组的创建使用了“{}"**。创建数组a的时候，使用花括号将不同类型和尺寸的数据组合在一起构成了一个元胞数组，在这个数组中有标量、多维数组、向量和字符串。

```matlab
>> b=[{'matlab'},{20};{ones(2,3)},{1:10}]
b = 
     'matlab'        [         20]
    [2x3 double]    [1x10 double]
```
两种方法创建的数组是相同的。

还可以用cell函数创建空元胞数组，该函数可以创建一维、二维或多维元胞数组，但是创建的数组都为空元胞。

```matlab
>> a=cell(1)

a =

  1×1 cell 数组

    {0×0 double}

>> b=cell(1,2)

b =

  1×2 cell 数组

    {0×0 double}    {0×0 double}

>>  c=cell(3,3)

c =

  3×3 cell 数组

    {0×0 double}    {0×0 double}    {0×0 double}
    {0×0 double}    {0×0 double}    {0×0 double}
    {0×0 double}    {0×0 double}    {0×0 double}
```

cell函数创建空元胞数组的主要目的是为数组预先分配连续的存储空间，节约内存占用，提高执行效率。

#### 2.获得元胞数组中的数据

可通过用元胞数组名加大括号“{}”，大括号中的数值表示元胞的下标。如a{1,2}表示元胞数组中第一行第二列的元胞。

```matlab
>> a={'matlab',20;ones(2,3),1:10}

a =

  2×2 cell 数组

    {'matlab'  }    {[       20]}
    {2×3 double}    {1×10 double}

>> a{1,2}

ans =

    20
    
>> a(1,2)

ans =

  1×1 cell 数组

    {[20]}
```

**注意：大括号用于表示元胞的内容，小括号表示指定的元胞。**

要访问指定元胞中的具体元素，可以在元胞数组内容下标的后面加上指定数组元胞的下标。如：a{1,2}(1,2)表示元胞a{1,2}的元素(1,2)。

```matlab
>> a={20,'matlab';ones(2,3),1:10}

a =

  2×2 cell 数组

    {[      20]}    {'matlab'   }
    {2×3 double}    {1×10 double}

>> a{1,2}(2)

ans =

    'a'
```

#### 3.元胞数组与其他数据类型的转换
##### 1）num2cell——将数组转换为相同大小的元胞数组

```
C = num2cell(A)
C = num2cell(A,dim)
```

C = num2cell(A) 通过将 A 的每个元素放置于 C 的一个单独元胞中，来将数组 A 转换为元胞数组 C。数组 A 无需为数值。

C = num2cell(A,dim) 将 A 的内容划分成 C 中单独的元胞，其中 dim 指定每个元胞包含 A 的哪个维度。dim 可以是维度的标量或矢量。例如，如果 A 有 2 行 3 列，那么：

- num2cell(A,1) 创建一个 1×3 元胞数组 C，其中每个元胞包含 A 的 2×1 列。
- num2cell(A,2) 创建一个 2×1 元胞数组 C，其中每个元胞包含 A 的 1×3 行。
- num2cell(A,[1 2]) 创建一个 1×1 元胞数组 C，其中每个元胞包含 A 整个数组。


##### 2）cell2mat——将元胞数组转换为基础数据类型的普通数组

```
A = cell2mat(C)
```
A = cell2mat(C) 将元胞数组转换为普通数组。元胞数组的元素必须全都包括相同的数据类型，并且生成的数组也是该数据类型。
C 的内容必须支持串联到 N 维矩形中。否则，结果将不确定。例如，同一列中的元胞的内容必须具有相同的列数，但不需要具有相同的行数。

```matla
>> C = {[1],    [2 3 4];
     [5; 9], [6 7 8; 10 11 12]}

C =

  2×2 cell 数组

    {[       1]}    {1×3 double}
    {2×1 double}    {2×3 double}

>> A = cell2mat(C)

A =

     1     2     3     4
     5     6     7     8
     9    10    11    12

```

### 绘图相关函数
1、fill——填充二维多边形
fill 函数创建彩色多边形。

fill(X,Y,C) 根据 X 和 Y 中的数据创建填充的多边形（顶点颜色由 C 指定）。C 是一个用作颜色图索引的矢量或矩阵。如果 C 为行矢量，length(C) 必须等于 size(X,2) 和 size(Y,2)；如果 C 为列矢量，length(C) 必须等于 size(X,1) 和 size(Y,1)。必要时，fill 可将最后一个顶点与第一个顶点相连以闭合多边形。X 和 Y 的值可以是数字、日期时间、持续时间或类别值。

fill(X,Y,ColorSpec) 填充 X 和 Y 指定的二维多边形（颜色由 ColorSpec 指定）。

例
```matlab
t = (1/16:1/8:1)'*2*pi;
x = cos(t);
y = sin(t);
fill(x,y,'r')
axis square
```
![_config.yml]({{ site.baseurl }}/images/fill.png)

### 随机数
#### 1、rand——均匀分布的随机数
**语法**
```
X = rand
X = rand(n)
X = rand(sz1,...,szN)
X = rand(sz)

```
**说明** 
```
X = rand 返回一个在区间 (0,1) 内均匀分布的随机数。

X = rand(n) 返回一个 n×n 的随机数矩阵。

X = rand(sz1,...,szN) 返回由随机数组成的 sz1×...×szN 数组，其中 sz1,...,szN 指示每个维度的大小。例如：rand(3,4) 返回一个 3×4 的矩阵。

X = rand(sz) 返回由随机数组成的数组，其中大小矢量 sz 指定 size(X)。例如：rand([3 4]) 返回一个 3×4 的矩阵。

```

#### 2、rng——控制随机数生成

| 说明| 
| -------------------------------------------------------          |
| rng(seed) 使用非负整数 seed 为随机数生成函数提供种子，以使 rand、randi 和 randn 生成可预测的数字序列。|
|rng('shuffle') 根据当前时间为随机数生成函数提供种子。这样，rand、randi 和 randn 会在您每次调用 rng 时生成不同的数字序列。|
|rng('default') 将 rand、randi 和randn使用的随机数生成函数的设置重置为其默认值。这样，会生成相同的随机数，就好像您重新启动了 MATLAB。默认设置是种子为 0 的 Mersenne Twister。|
|rng(s) 将 rand、randi 和 randn 使用的随机数生成函数的设置还原回之前用 s = rng 等命令捕获的值。|

**实例**

```
示例 1 - 检索和还原生成函数设置
将当前生成函数设置保存在 s 中：

s = rng;
调用 rand 以生成随机值矢量：

x = rand(1,5)

x =

    0.8147    0.9058    0.1270    0.9134    0.6324
通过调用 rng 还原原始生成函数设置。生成一组新的随机值并验证 x 和 y 是否相等：

rng(s);
y = rand(1,5)

y =

    0.8147    0.9058    0.1270    0.9134    0.6324

```


### Matlab中的函数句柄@
@是Matlab中的句柄函数的标识符，即间接地函数调用方法。

#### 1.句柄函数
【转】[http://blog.csdn.net/yhl_leo/article/details/50699990](http://blog.csdn.net/yhl_leo/article/details/50699990)
主要有两种语法：

- handle=@functionname
- handle = @(arglist)anonymous_function
    
handle = @functionname：返回一个特别的Matlab函数句柄，它提供了一种间接访问函数的方式，也被成为函数的函数(function functions)，是一种标准的Matlab数据类型。在C/C++中，有个类似的用法称为引用（使用标识符&），引用只是它绑定的对象的另一个名字，作用在应用上的所有操作事实上都会作用在该引用绑定的对象上。Matlab里句柄函数，与前面讲得引用有些类似，我们通过语句handle = @functionname给名为functionname的函数取了个别名handle，也就是说你既可以用函数functionname实现你要实现的功能，也可以使用handle实现同样的功能。在Python里，你大可直接用变量赋值的方式handle = functionname达到这一目的。

基本用法如下：

```matlab
>> haha=@cos

haha =

  包含以下值的 function_handle:

    @cos

>> haha(pi)

ans =

    -1
```

handle = @(arglist)anonymous_function：也称为匿名函数，@左边为一个函数句柄，@后定义了匿名函数的输入参数（多个参数用逗号分隔开），最后一部分为匿名函数的表达式。基本用法如下：

```matlab
>> sqr=@(x) x.^2

sqr =

  包含以下值的 function_handle:

    @(x)x.^2

>> a=sqr([1,2,3])

a =

     1     4     9
```

#### 2、句柄处理函数

|  **函数**      | **说明**   | 
|  -------      | -----:  |
|  functions   | 返回一个句柄的详细信息|
|  str2func  | 将一个函数名作为字符串传递给此函数，创建该函数的函数句柄|
|  func2str  | 从一个函数句柄中提取函数名，对于内置函数或m文件函数句柄，返回函数的名称，对于匿名函数，返回其表达式|
|  structfun  | 	将句柄结构体数组的每一个句柄函数的依次作用于数组，返回每个句柄函数的作用于数组的值|

逐一给出示例：

```matlab
>> functions(sqr)

ans = 

  包含以下字段的 struct:

            function: '@(x)x.^2'
                type: 'anonymous'
                file: ''
           workspace: {[1×1 struct]}
    within_file_path: '__base_function'
    
 fh2 = str2func('sqr')

fh2 =

  包含以下值的 function_handle:

    @sqr
    
func2str(fh2)

ans =

    'sqr'
    
func2str(sqr)

ans =

    '@(x)x.^2'
    
S.a = @sin; S.b = @cos; S.c = @tan;
>>  structfun(@(x)x(linspace(1, 4, 3)), S, 'UniformOutput', false)

ans = 

  包含以下字段的 struct:

    a: [0.8415 0.5985 -0.7568]
    b: [0.5403 -0.8011 -0.6536]
    c: [1.5574 -0.7470 1.1578]
```

### Matlab中的arrayfun与cellfun函数

#### 1、arrayfun——将函数应用于每个数组元素


**语法**
```
[B1,...,Bm] = arrayfun(func,A1,...,An)
[B1,...,Bm] = arrayfun(func,A1,...,An,Name,Value)
```

**说明**

```
[B1,...,Bm] = arrayfun(func,A1,...,An) 调用函数句柄 func 指定的函数，并传递数组 A1,...,An 中的元素，其中 n 是函数 func 的输入数目。输出数组 B1,...,Bm 包含调用函数时的组合输出，其中 m 是函数 func 的输出数目。第 i 个迭代对应于语法 [B1(i),...,Bm(i)] = func(A1(i),...,An(i))。arrayfun 函数没有按特定顺序执行对 func 函数的调用。

[B1,...,Bm] = arrayfun(func,A1,...,An,Name,Value) 调用函数 func，其中通过一个或多个 Name,Value 对组参数指定其他选项。Name 的可能值包括 'UniformOutput' 或 'ErrorHandler'。
```

**例子**

```matlab
s(1).f1 = rand(3, 6);
s(2).f1 = magic(12);
s(3).f1 = ones(5, 10);

计算每个 f1 字段中的元素数量
>> counts = arrayfun(@(x) numel(x.f1),s)

counts =

    18   144    50
    
语法 @(x) 可以创建匿名函数。
```

#### 2、cellfun——对元胞数组中的每个元胞应用函数
与arrayfun函数用法类似

```
[A1,...,Am] = cellfun(func,C1,...,Cn)
[A1,...,Am] = cellfun(func,C1,...,Cn,Name,Value)
```


### 参考
[元胞数组的用法](http://blog.csdn.net/fandoudou123/article/details/41652495)
[Matlab中的函数句柄@](http://blog.csdn.net/yhl_leo/article/details/50699990)
